{"openapi":"3.0.1","info":{"title":"Qakka","description":"API for Qakka Queue System","license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"},"version":"v1"},"servers":[{"url":"//apache.local/"}],"tags":[{"name":"queues","description":"Queue management, send, get and ack."},{"name":"status","description":"Status end-point."}],"paths":{"/queues":{"get":{"tags":["queues"],"summary":"Get list of all Queues.","operationId":"getListOfQueues","responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}},"post":{"tags":["queues"],"summary":"Create new queue.","operationId":"createQueue","responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"400":{"description":"No Queue object posted, or name field is missing"}}}},"/queues/{queueName}":{"delete":{"tags":["queues"],"summary":"Delete Queue.","operationId":"deleteQueue","parameters":[{"name":"queueName","in":"path","required":true,"schema":{"type":"string"}},{"name":"confirm","in":"query","schema":{"type":"boolean","default":false}}],"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"400":{"description":"Queue name or confirm flag missing."}}}},"/queues/{queueName}/config":{"get":{"tags":["queues"],"summary":"Get Queue config.","operationId":"getQueueConfig","parameters":[{"name":"queueName","in":"path","description":"Name of Queue","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"400":{"description":"Queue name or confirm flag missing."}}},"put":{"tags":["queues"],"summary":"Update Queue configuration.","operationId":"updateQueueConfig","parameters":[{"name":"queueName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"400":{"description":"No Queue object posted, or name field is missing"}}}},"/queues/{queueName}/data/{queueMessageId}":{"get":{"tags":["queues"],"summary":"Get data associated with a Queue Message.","operationId":"getMessageData","parameters":[{"name":"queueName","in":"path","description":"Name of Queue","required":true,"schema":{"type":"string"}},{"name":"queueMessageId","in":"path","description":"ID of Queue Message for which data is to be returned","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"successful operation","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"400":{"description":"Message ID invalid"},"404":{"description":"Queue Message or data not found"}}}},"/queues/{queueName}/messages":{"get":{"tags":["queues"],"summary":"Get next Queue Messages from a Queue","operationId":"getNextMessages","parameters":[{"name":"queueName","in":"path","description":"Name of Queue","required":true,"schema":{"type":"string"}},{"name":"count","in":"query","description":"Number of messages to get","schema":{"type":"string","default":"1"}}],"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"400":{"description":"Invalid count parameter"}}},"post":{"tags":["queues"],"summary":"Send Queue Message with a binary data (blob) payload.","operationId":"sendMessageBinary","parameters":[{"name":"queueName","in":"path","description":"Name of Queue","required":true,"schema":{"type":"string"}},{"name":"regions","in":"query","description":"Regions to which message is to be sent","schema":{"type":"string"}},{"name":"delay","in":"query","schema":{"type":"string"}},{"name":"expiration","in":"query","schema":{"type":"string"}},{"name":"contentType","in":"query","description":"Content type of the data to be sent with Queue Message","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Data to be send with Queue Message","content":{"application/octet-stream":{"schema":{"type":"array","items":{"pattern":"^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$","type":"string","format":"byte"}}}},"required":true},"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}}}}},"/queues/{queueName}/messages/{queueMessageId}":{"delete":{"tags":["queues"],"summary":"Acknowledge that Queue Message has been processed.","operationId":"ackMessage","parameters":[{"name":"queueName","in":"path","description":"Name of Queue","required":true,"schema":{"type":"string"}},{"name":"queueMessageId","in":"path","description":"ID of Queue Message to be acknowledged","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"400":{"description":"Queue Message ID invalid, or message not in-flight"}}}},"/status":{"get":{"tags":["status"],"summary":"Status of webapp.","operationId":"status","responses":{"200":{"description":"successful operation","content":{"application/json":{"schema":{"type":"object"}}}}}}}},"components":{"schemas":{"ApiResponse":{"type":"object","properties":{"count":{"type":"integer","description":"Count of Queues or QueueMessages returned by the call.","format":"int32"},"message":{"type":"string","description":"Informative message intended for client."},"queueMessages":{"type":"array","description":"Queues Messages returned by the call, or empty if not applicable.","items":{"$ref":"#/components/schemas/QueueMessage"}},"queues":{"type":"array","description":"Queues returned but the call, or empty if not applicable.","items":{"$ref":"#/components/schemas/Queue"}}},"description":"Response returned by most Queue API calls."},"Queue":{"required":["name"],"type":"object","properties":{"name":{"type":"string","description":"Name of queue, must be unique."}},"description":"Specifies the configuration for a Queue."},"QueueMessage":{"required":["queueName"],"type":"object","properties":{"contentType":{"type":"string","description":"Content-type of data associated with QueueMessage."},"createDate":{"type":"integer","description":"Date that message was received by system.","format":"int64"},"data":{"type":"string","description":"Embedded JSON to be sent with Queue Message."},"href":{"type":"string","description":"URL of data associated with Queue Message (if not embedded JSON)"},"messageId":{"type":"string","description":"UUID of Message Data associated with this Queue Message","format":"uuid"},"queueMessageId":{"type":"string","description":"UUID of Queue Message in local region.","format":"uuid"},"queueName":{"type":"string","description":"Name of Queue for message."},"receivingRegion":{"type":"string","description":"Regions to which message will be sent"},"sendingRegion":{"type":"string","description":"Region from which was sent"}},"description":"A Queue Message"}}}}